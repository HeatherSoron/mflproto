{"version":3,"sources":["../../node_modules/diff/dist/diff.js","templates/sentencetable.js","views.js","../../node_modules/axios/lib/helpers/bind.js","../../node_modules/axios/lib/utils.js","../../node_modules/axios/lib/helpers/buildURL.js","../../node_modules/axios/lib/core/InterceptorManager.js","../../node_modules/axios/lib/core/transformData.js","../../node_modules/axios/lib/cancel/isCancel.js","../../node_modules/axios/lib/helpers/normalizeHeaderName.js","../../node_modules/axios/lib/core/enhanceError.js","../../node_modules/axios/lib/core/createError.js","../../node_modules/axios/lib/core/settle.js","../../node_modules/axios/lib/helpers/isAbsoluteURL.js","../../node_modules/axios/lib/helpers/combineURLs.js","../../node_modules/axios/lib/core/buildFullPath.js","../../node_modules/axios/lib/helpers/parseHeaders.js","../../node_modules/axios/lib/helpers/isURLSameOrigin.js","../../node_modules/axios/lib/helpers/cookies.js","../../node_modules/axios/lib/adapters/xhr.js","../../../../.nvm/versions/node/v14.16.0/lib/node_modules/parcel-bundler/node_modules/process/browser.js","../../node_modules/axios/lib/defaults.js","../../node_modules/axios/lib/core/dispatchRequest.js","../../node_modules/axios/lib/core/mergeConfig.js","../../node_modules/axios/lib/core/Axios.js","../../node_modules/axios/lib/cancel/Cancel.js","../../node_modules/axios/lib/cancel/CancelToken.js","../../node_modules/axios/lib/helpers/spread.js","../../node_modules/axios/lib/axios.js","../../node_modules/axios/index.js","models.js","controllers.js","app.js"],"names":["global","factory","exports","module","define","amd","self","Diff","prototype","diff","oldString","newString","options","arguments","length","undefined","callback","done","value","setTimeout","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","newPos","components","oldPos","extractCommon","join","count","execEditLength","diagonalPath","basePath","addPath","removePath","_oldPos","canAdd","canRemove","clonePath","pushComponent","buildValues","useLongestToken","exec","ret","added","removed","last","push","commonCount","equals","left","right","comparator","ignoreCase","toLowerCase","array","i","split","chars","componentPos","componentLen","component","slice","map","oldValue","tmp","lastComponent","pop","path","characterDiff","diffChars","oldStr","newStr","generateOptions","defaults","name","hasOwnProperty","extendedWordChars","reWhitespace","wordDiff","ignoreWhitespace","test","tokens","splice","diffWords","diffWordsWithSpace","lineDiff","retLines","linesAndNewlines","line","newlineIsToken","trim","diffLines","diffTrimmedLines","sentenceDiff","diffSentences","cssDiff","diffCss","_typeof","obj","Symbol","iterator","constructor","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Object","from","o","minLen","n","toString","call","len","arr2","TypeError","objectPrototypeToString","jsonDiff","_this$options","undefinedReplacement","_this$options$stringi","stringifyReplacer","k","v","JSON","stringify","canonicalize","replace","diffJson","oldObj","newObj","stack","replacementStack","replacer","key","canonicalizedObj","toJSON","sortedKeys","_key","sort","arrayDiff","diffArrays","oldArr","newArr","parsePatch","uniDiff","diffstr","delimiters","match","list","parseIndex","index","header","parseFileHeader","hunks","_line","parseHunk","strict","Error","fileHeader","keyPrefix","data","fileName","substr","chunkHeaderIndex","chunkHeaderLine","chunkHeader","hunk","oldStart","oldLines","newStart","newLines","lines","linedelimiters","addCount","removeCount","indexOf","operation","distanceIterator","start","minLine","maxLine","wantForward","backwardExhausted","forwardExhausted","localOffset","applyPatch","source","compareLine","lineNumber","patchContent","errorCount","fuzzFactor","offset","removeEOFNL","addEOFNL","hunkFits","toPos","j","content","diffOffset","_i","_hunk","_toPos","delimiter","previousOperation","_k","applyPatches","currentIndex","processIndex","complete","loadFile","err","updatedContent","patched","structuredPatch","oldFileName","newFileName","oldHeader","newHeader","context","contextLines","entry","oldRangeStart","newRangeStart","curRange","oldLine","newLine","_loop","current","_curRange","prev","apply","_curRange2","_curRange3","contextSize","Math","min","oldEOFNewline","newEOFNewline","noNlBeforeAdds","formatPatch","createTwoFilesPatch","createPatch","arrayEqual","a","b","arrayStartsWith","calcLineCount","_calcOldNewLineCount","calcOldNewLineCount","merge","mine","theirs","base","loadPatch","fileNameChanged","selectField","mineIndex","theirsIndex","mineOffset","theirsOffset","mineCurrent","Infinity","theirsCurrent","hunkBefore","cloneHunk","mergedHunk","mergeLines","param","patch","conflict","check","mineLines","theirOffset","theirLines","their","insertLeading","theirCurrent","mutualChange","_hunk$lines","collectChange","_hunk$lines2","removal","insertTrailing","myChanges","theirChanges","allRemoves","skipRemoveSuperset","_hunk$lines3","_hunk$lines4","_hunk$lines5","swap","collectContext","merged","_hunk$lines6","insert","state","matchChanges","changes","matchIndex","contextChanges","conflicted","change","reduce","removeChanges","delta","changeContent","forEach","myCount","theirCount","convertChangesToDMP","convertChangesToXML","escapeHTML","s","defineProperty","pug_attr","t","e","r","f","pug_escape","pug_classes","pug_classes_array","pug_classes_object","u","c","g","pug_has_own_property","pug_match_html","charCodeAt","substring","pug_rethrow","window","message","readFileSync","max","h","sentencetableTemplate","locals","pug_html","pug_mixins","pug_interp","pug_debug_filename","pug_debug_line","pug_debug_sources","locals_for_with","fieldClasses","fields","sentences","$$obj","pug_index0","$$l","field","pug_index1","pug_index2","sentence","_id","pug_index3","pug_index4","View","baseElement","root","elements","elementGroups","listeners","hideElement","style","display","showElement","defineElementGroup","groupName","elementNameArray","showGroup","elementName","hideGroup","exists","on","event","trigger","eventOnRoot","addEventListener","FormView","onFormData","preventDefault","getFormData","inputs","querySelectorAll","el","id","clearFormData","LogoutView","AlertView","hide","document","querySelector","parentElement","removeChild","show","type","msg","markup","insertAdjacentHTML","onerror","DataParserView","get","input_name","parse","LoginFormView","SignupFormView","CreateSentenceFormView","CreateTaskView","getValues","selector","nonToggleInputs","CreateTaskRandomView","element","vivaRefRes","getUpperLower","switches","vivaRefLow","vivaRefHigh","levelRes","levelLow","levelHigh","nonToggleValues","paramsObject","params","URLSearchParams","searchParams","decodeURIComponent","taskDetails","checked","getElementsByTagName","showHide","srcElement","checkOne","checkTwo","searchParam","lowerValue","higherValue","res","CreateTaskChooseSentenceView","tableParent","saveButton","getFilterElements","updateFilters","bind","evt","target","tagName","sentenceId","dataset","sentence_id","triggerType","filterState","updateDisplay","toSave","grammar","vivaRef","tense","level","innerHTML","TrainingView","prompt","input","answer_feedback","answer_feedback_inner","correct_answer","correct_answer_inner","right_count","total_count","submit_button","next_button","clearAnswerText","handleStudentAnswer","updateCounts","total","innerText","student_answer","normalize","str","isCorrect","answer","diffs","setAsHighlightedSpan","filter","focus","classNameCallback","baseEl","spans","elClass","span","finish","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","nextTick","args","Item","title","env","argv","version","versions","noop","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","ModelApiError","Model","sendApiRequest","url","method","status","response","getLocal","single","AuthModel","login","email","password","logout","signup","passwordConfirm","classCode","CreateTaskModel","CreateSentenceModel","create","translation","StudentResultsModel","sendResults","correctCount","wrongCount","studentSentences","payload","finishedSentences","SentenceModel","subclassAs","GappedSentenceModel","TranslationSentenceModel","fetchAll","sentenceData","words","gapIndex","floor","random","gapWord","gappedPrompt","Controller","viewBaseElement","viewClass","getViewClass","view","LoginController","location","assign","LogoutController","SignupController","CreateSentenceController","CreateTaskRandomController","onCreateTaskRandomValues","sentencesRes","createTask","TrainController","exerciseType","sent","initialCount","rightCount","doAnswer","doNextSentence","desiredReaskLength","sentenceObject","shift","insertionIndex","console","log","sendResultsToServer","then","_","send","CreateTaskChooseSentenceController","filterData","sentencesToSave","some","other","includes","find","save","updateSentences","catch","domElement","controllerClass","controllers"],"mappings":"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;;AACA,qCAAuB6Q,OAAvB,gBAAmCpV,KAAnC;AACD,KAJa,CAAd;AAMAkV,IAAAA,MAAM,CAAC3B,SAAP,GAAmB4B,KAAK,CAACrd,IAAN,CAAW,EAAX,CAAnB,CAV0D,CAY1D;;AACAiF,IAAAA,KAAK,CAACK,IAAN,CAAW8X,MAAM,CAACtG,gBAAP,CAAwB,MAAxB,CAAX,EAA4C/E,OAA5C,CAAqDwL,IAAD,IAAU;AAC5DA,MAAAA,IAAI,CAACd,SAAL,GAAiB9a,KAAK,CAAC4b,IAAI,CAACd,SAAN,CAAL,CAAsBvd,KAAvC;AACD,KAFD;AAGD;;AAEDse,EAAAA,MAAM,GAAG;AACP,SAAK7B,MAAL,GAAc,MAAd;AACA,SAAKzF,SAAL,CAAe,WAAf;AACA,SAAKA,SAAL,CAAe,UAAf;AACD;;AAES,MAANyF,MAAM,GAAG;AACX,WAAO,KAAKrG,QAAL,CAAcqG,MAAd,CAAqBc,SAA5B;AACD;;AAES,MAANd,MAAM,CAACzc,KAAD,EAAQ;AAChB,WAAQ,KAAKoW,QAAL,CAAcqG,MAAd,CAAqBc,SAArB,GAAiCvd,KAAzC;AACD;;AAvIwC;;;;ACxT3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpLA;AACA,IAAIue,OAAO,GAAGtf,MAAM,CAACD,OAAP,GAAiB,EAA/B,EAEA;AACA;AACA;AACA;;AAEA,IAAIwf,gBAAJ;AACA,IAAIC,kBAAJ;;AAEA,SAASC,gBAAT,GAA4B;AACxB,QAAM,IAAInV,KAAJ,CAAU,iCAAV,CAAN;AACH;;AACD,SAASoV,mBAAT,GAAgC;AAC5B,QAAM,IAAIpV,KAAJ,CAAU,mCAAV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AACA3B,OAAO,CAAC4B,WAAR,GAAsBD,IAAtB;AACA3B,OAAO,CAAC6B,IAAR,GAAeF,IAAf;AACA3B,OAAO,CAAC8B,GAAR,GAAcH,IAAd;AACA3B,OAAO,CAAC+B,cAAR,GAAyBJ,IAAzB;AACA3B,OAAO,CAACgC,kBAAR,GAA6BL,IAA7B;AACA3B,OAAO,CAACiC,IAAR,GAAeN,IAAf;AACA3B,OAAO,CAACkC,eAAR,GAA0BP,IAA1B;AACA3B,OAAO,CAACmC,mBAAR,GAA8BR,IAA9B;;AAEA3B,OAAO,CAACjI,SAAR,GAAoB,UAAUzS,IAAV,EAAgB;AAAE,SAAO,EAAP;AAAW,CAAjD;;AAEA0a,OAAO,CAACoC,OAAR,GAAkB,UAAU9c,IAAV,EAAgB;AAC9B,QAAM,IAAI0F,KAAJ,CAAU,kCAAV,CAAN;AACH,CAFD;;AAIAgV,OAAO,CAACqC,GAAR,GAAc,YAAY;AAAE,SAAO,GAAP;AAAY,CAAxC;;AACArC,OAAO,CAACsC,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,QAAM,IAAIvX,KAAJ,CAAU,gCAAV,CAAN;AACH,CAFD;;AAGAgV,OAAO,CAACwC,KAAR,GAAgB,YAAW;AAAE,SAAO,CAAP;AAAW,CAAxC;;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;;;;;;;;;ACAA;;AACA;;;;AAEA,MAAMC,aAAN,SAA4BzX,KAA5B,CAAkC,GAElC;AACA;AACA;AACA;;;AACA,MAAM0X,KAAN,CAAY;AACVzb,EAAAA,WAAW,CAACkE,IAAD,EAAO;AAChB,SAAKA,IAAL,GAAYA,IAAZ;AACD,GAHS,CAKV;;;AAC2B,eAAdwX,cAAc,CAACC,GAAD,EAAMC,MAAN,EAAc1X,IAAd,EAAoB;AAC7C,QAAI;AACF,YAAMwR,GAAG,GAAG,MAAM,oBAAM;AACtBkG,QAAAA,MADsB;AAEtBD,QAAAA,GAFsB;AAGtBzX,QAAAA;AAHsB,OAAN,CAAlB;;A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","file":"bundle.js","sourceRoot":"","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.Diff = {}));\n}(this, (function (exports) { 'use strict';\n\n  function Diff() {}\n  Diff.prototype = {\n    diff: function diff(oldString, newString) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = options.callback;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      this.options = options;\n      var self = this;\n\n      function done(value) {\n        if (callback) {\n          setTimeout(function () {\n            callback(undefined, value);\n          }, 0);\n          return true;\n        } else {\n          return value;\n        }\n      } // Allow subclasses to massage the input prior to running\n\n\n      oldString = this.castInput(oldString);\n      newString = this.castInput(newString);\n      oldString = this.removeEmpty(this.tokenize(oldString));\n      newString = this.removeEmpty(this.tokenize(newString));\n      var newLen = newString.length,\n          oldLen = oldString.length;\n      var editLength = 1;\n      var maxEditLength = newLen + oldLen;\n      var bestPath = [{\n        newPos: -1,\n        components: []\n      }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n      var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\n      if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n        // Identity per the equality and tokenizer\n        return done([{\n          value: this.join(newString),\n          count: newString.length\n        }]);\n      } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n      function execEditLength() {\n        for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n          var basePath = void 0;\n\n          var addPath = bestPath[diagonalPath - 1],\n              removePath = bestPath[diagonalPath + 1],\n              _oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n          if (addPath) {\n            // No one else is going to attempt to use this value, clear it\n            bestPath[diagonalPath - 1] = undefined;\n          }\n\n          var canAdd = addPath && addPath.newPos + 1 < newLen,\n              canRemove = removePath && 0 <= _oldPos && _oldPos < oldLen;\n\n          if (!canAdd && !canRemove) {\n            // If this path is a terminal then prune\n            bestPath[diagonalPath] = undefined;\n            continue;\n          } // Select the diagonal that we want to branch from. We select the prior\n          // path whose position in the new string is the farthest from the origin\n          // and does not pass the bounds of the diff graph\n\n\n          if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n            basePath = clonePath(removePath);\n            self.pushComponent(basePath.components, undefined, true);\n          } else {\n            basePath = addPath; // No need to clone, we've pulled it from the list\n\n            basePath.newPos++;\n            self.pushComponent(basePath.components, true, undefined);\n          }\n\n          _oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath); // If we have hit the end of both strings, then we are done\n\n          if (basePath.newPos + 1 >= newLen && _oldPos + 1 >= oldLen) {\n            return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n          } else {\n            // Otherwise track this path as a potential candidate and continue.\n            bestPath[diagonalPath] = basePath;\n          }\n        }\n\n        editLength++;\n      } // Performs the length of edit iteration. Is a bit fugly as this has to support the\n      // sync and async mode which is never fun. Loops over execEditLength until a value\n      // is produced.\n\n\n      if (callback) {\n        (function exec() {\n          setTimeout(function () {\n            // This should not happen, but we want to be safe.\n\n            /* istanbul ignore next */\n            if (editLength > maxEditLength) {\n              return callback();\n            }\n\n            if (!execEditLength()) {\n              exec();\n            }\n          }, 0);\n        })();\n      } else {\n        while (editLength <= maxEditLength) {\n          var ret = execEditLength();\n\n          if (ret) {\n            return ret;\n          }\n        }\n      }\n    },\n    pushComponent: function pushComponent(components, added, removed) {\n      var last = components[components.length - 1];\n\n      if (last && last.added === added && last.removed === removed) {\n        // We need to clone here as the component clone operation is just\n        // as shallow array clone\n        components[components.length - 1] = {\n          count: last.count + 1,\n          added: added,\n          removed: removed\n        };\n      } else {\n        components.push({\n          count: 1,\n          added: added,\n          removed: removed\n        });\n      }\n    },\n    extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n      var newLen = newString.length,\n          oldLen = oldString.length,\n          newPos = basePath.newPos,\n          oldPos = newPos - diagonalPath,\n          commonCount = 0;\n\n      while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n        newPos++;\n        oldPos++;\n        commonCount++;\n      }\n\n      if (commonCount) {\n        basePath.components.push({\n          count: commonCount\n        });\n      }\n\n      basePath.newPos = newPos;\n      return oldPos;\n    },\n    equals: function equals(left, right) {\n      if (this.options.comparator) {\n        return this.options.comparator(left, right);\n      } else {\n        return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n      }\n    },\n    removeEmpty: function removeEmpty(array) {\n      var ret = [];\n\n      for (var i = 0; i < array.length; i++) {\n        if (array[i]) {\n          ret.push(array[i]);\n        }\n      }\n\n      return ret;\n    },\n    castInput: function castInput(value) {\n      return value;\n    },\n    tokenize: function tokenize(value) {\n      return value.split('');\n    },\n    join: function join(chars) {\n      return chars.join('');\n    }\n  };\n\n  function buildValues(diff, components, newString, oldString, useLongestToken) {\n    var componentPos = 0,\n        componentLen = components.length,\n        newPos = 0,\n        oldPos = 0;\n\n    for (; componentPos < componentLen; componentPos++) {\n      var component = components[componentPos];\n\n      if (!component.removed) {\n        if (!component.added && useLongestToken) {\n          var value = newString.slice(newPos, newPos + component.count);\n          value = value.map(function (value, i) {\n            var oldValue = oldString[oldPos + i];\n            return oldValue.length > value.length ? oldValue : value;\n          });\n          component.value = diff.join(value);\n        } else {\n          component.value = diff.join(newString.slice(newPos, newPos + component.count));\n        }\n\n        newPos += component.count; // Common case\n\n        if (!component.added) {\n          oldPos += component.count;\n        }\n      } else {\n        component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n        oldPos += component.count; // Reverse add and remove so removes are output first to match common convention\n        // The diffing algorithm is tied to add then remove output and this is the simplest\n        // route to get the desired output with minimal overhead.\n\n        if (componentPos && components[componentPos - 1].added) {\n          var tmp = components[componentPos - 1];\n          components[componentPos - 1] = components[componentPos];\n          components[componentPos] = tmp;\n        }\n      }\n    } // Special case handle for when one terminal is ignored (i.e. whitespace).\n    // For this case we merge the terminal into the prior string and drop the change.\n    // This is only available for string mode.\n\n\n    var lastComponent = components[componentLen - 1];\n\n    if (componentLen > 1 && typeof lastComponent.value === 'string' && (lastComponent.added || lastComponent.removed) && diff.equals('', lastComponent.value)) {\n      components[componentLen - 2].value += lastComponent.value;\n      components.pop();\n    }\n\n    return components;\n  }\n\n  function clonePath(path) {\n    return {\n      newPos: path.newPos,\n      components: path.components.slice(0)\n    };\n  }\n\n  var characterDiff = new Diff();\n  function diffChars(oldStr, newStr, options) {\n    return characterDiff.diff(oldStr, newStr, options);\n  }\n\n  function generateOptions(options, defaults) {\n    if (typeof options === 'function') {\n      defaults.callback = options;\n    } else if (options) {\n      for (var name in options) {\n        /* istanbul ignore else */\n        if (options.hasOwnProperty(name)) {\n          defaults[name] = options[name];\n        }\n      }\n    }\n\n    return defaults;\n  }\n\n  //\n  // Ranges and exceptions:\n  // Latin-1 Supplement, 0080–00FF\n  //  - U+00D7  × Multiplication sign\n  //  - U+00F7  ÷ Division sign\n  // Latin Extended-A, 0100–017F\n  // Latin Extended-B, 0180–024F\n  // IPA Extensions, 0250–02AF\n  // Spacing Modifier Letters, 02B0–02FF\n  //  - U+02C7  ˇ &#711;  Caron\n  //  - U+02D8  ˘ &#728;  Breve\n  //  - U+02D9  ˙ &#729;  Dot Above\n  //  - U+02DA  ˚ &#730;  Ring Above\n  //  - U+02DB  ˛ &#731;  Ogonek\n  //  - U+02DC  ˜ &#732;  Small Tilde\n  //  - U+02DD  ˝ &#733;  Double Acute Accent\n  // Latin Extended Additional, 1E00–1EFF\n\n  var extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\n  var reWhitespace = /\\S/;\n  var wordDiff = new Diff();\n\n  wordDiff.equals = function (left, right) {\n    if (this.options.ignoreCase) {\n      left = left.toLowerCase();\n      right = right.toLowerCase();\n    }\n\n    return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n  };\n\n  wordDiff.tokenize = function (value) {\n    // All whitespace symbols except newline group into one token, each newline - in separate token\n    var tokens = value.split(/([^\\S\\r\\n]+|[()[\\]{}'\"\\r\\n]|\\b)/); // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\n    for (var i = 0; i < tokens.length - 1; i++) {\n      // If we have an empty string in the next field and we have only word chars before and after, merge\n      if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n        tokens[i] += tokens[i + 2];\n        tokens.splice(i + 1, 2);\n        i--;\n      }\n    }\n\n    return tokens;\n  };\n\n  function diffWords(oldStr, newStr, options) {\n    options = generateOptions(options, {\n      ignoreWhitespace: true\n    });\n    return wordDiff.diff(oldStr, newStr, options);\n  }\n  function diffWordsWithSpace(oldStr, newStr, options) {\n    return wordDiff.diff(oldStr, newStr, options);\n  }\n\n  var lineDiff = new Diff();\n\n  lineDiff.tokenize = function (value) {\n    var retLines = [],\n        linesAndNewlines = value.split(/(\\n|\\r\\n)/); // Ignore the final empty token that occurs if the string ends with a new line\n\n    if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n      linesAndNewlines.pop();\n    } // Merge the content and line separators into single tokens\n\n\n    for (var i = 0; i < linesAndNewlines.length; i++) {\n      var line = linesAndNewlines[i];\n\n      if (i % 2 && !this.options.newlineIsToken) {\n        retLines[retLines.length - 1] += line;\n      } else {\n        if (this.options.ignoreWhitespace) {\n          line = line.trim();\n        }\n\n        retLines.push(line);\n      }\n    }\n\n    return retLines;\n  };\n\n  function diffLines(oldStr, newStr, callback) {\n    return lineDiff.diff(oldStr, newStr, callback);\n  }\n  function diffTrimmedLines(oldStr, newStr, callback) {\n    var options = generateOptions(callback, {\n      ignoreWhitespace: true\n    });\n    return lineDiff.diff(oldStr, newStr, options);\n  }\n\n  var sentenceDiff = new Diff();\n\n  sentenceDiff.tokenize = function (value) {\n    return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n  };\n\n  function diffSentences(oldStr, newStr, callback) {\n    return sentenceDiff.diff(oldStr, newStr, callback);\n  }\n\n  var cssDiff = new Diff();\n\n  cssDiff.tokenize = function (value) {\n    return value.split(/([{}:;,]|\\s+)/);\n  };\n\n  function diffCss(oldStr, newStr, callback) {\n    return cssDiff.diff(oldStr, newStr, callback);\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var objectPrototypeToString = Object.prototype.toString;\n  var jsonDiff = new Diff(); // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n  // dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\n  jsonDiff.useLongestToken = true;\n  jsonDiff.tokenize = lineDiff.tokenize;\n\n  jsonDiff.castInput = function (value) {\n    var _this$options = this.options,\n        undefinedReplacement = _this$options.undefinedReplacement,\n        _this$options$stringi = _this$options.stringifyReplacer,\n        stringifyReplacer = _this$options$stringi === void 0 ? function (k, v) {\n      return typeof v === 'undefined' ? undefinedReplacement : v;\n    } : _this$options$stringi;\n    return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n  };\n\n  jsonDiff.equals = function (left, right) {\n    return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'));\n  };\n\n  function diffJson(oldObj, newObj, options) {\n    return jsonDiff.diff(oldObj, newObj, options);\n  } // This function handles the presence of circular references by bailing out when encountering an\n  // object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\n  function canonicalize(obj, stack, replacementStack, replacer, key) {\n    stack = stack || [];\n    replacementStack = replacementStack || [];\n\n    if (replacer) {\n      obj = replacer(key, obj);\n    }\n\n    var i;\n\n    for (i = 0; i < stack.length; i += 1) {\n      if (stack[i] === obj) {\n        return replacementStack[i];\n      }\n    }\n\n    var canonicalizedObj;\n\n    if ('[object Array]' === objectPrototypeToString.call(obj)) {\n      stack.push(obj);\n      canonicalizedObj = new Array(obj.length);\n      replacementStack.push(canonicalizedObj);\n\n      for (i = 0; i < obj.length; i += 1) {\n        canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n      }\n\n      stack.pop();\n      replacementStack.pop();\n      return canonicalizedObj;\n    }\n\n    if (obj && obj.toJSON) {\n      obj = obj.toJSON();\n    }\n\n    if (_typeof(obj) === 'object' && obj !== null) {\n      stack.push(obj);\n      canonicalizedObj = {};\n      replacementStack.push(canonicalizedObj);\n\n      var sortedKeys = [],\n          _key;\n\n      for (_key in obj) {\n        /* istanbul ignore else */\n        if (obj.hasOwnProperty(_key)) {\n          sortedKeys.push(_key);\n        }\n      }\n\n      sortedKeys.sort();\n\n      for (i = 0; i < sortedKeys.length; i += 1) {\n        _key = sortedKeys[i];\n        canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n      }\n\n      stack.pop();\n      replacementStack.pop();\n    } else {\n      canonicalizedObj = obj;\n    }\n\n    return canonicalizedObj;\n  }\n\n  var arrayDiff = new Diff();\n\n  arrayDiff.tokenize = function (value) {\n    return value.slice();\n  };\n\n  arrayDiff.join = arrayDiff.removeEmpty = function (value) {\n    return value;\n  };\n\n  function diffArrays(oldArr, newArr, callback) {\n    return arrayDiff.diff(oldArr, newArr, callback);\n  }\n\n  function parsePatch(uniDiff) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n        delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n        list = [],\n        i = 0;\n\n    function parseIndex() {\n      var index = {};\n      list.push(index); // Parse diff metadata\n\n      while (i < diffstr.length) {\n        var line = diffstr[i]; // File header found, end parsing diff metadata\n\n        if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n          break;\n        } // Diff index\n\n\n        var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n\n        if (header) {\n          index.index = header[1];\n        }\n\n        i++;\n      } // Parse file headers if they are defined. Unified diff requires them, but\n      // there's no technical issues to have an isolated hunk without file header\n\n\n      parseFileHeader(index);\n      parseFileHeader(index); // Parse hunks\n\n      index.hunks = [];\n\n      while (i < diffstr.length) {\n        var _line = diffstr[i];\n\n        if (/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/.test(_line)) {\n          break;\n        } else if (/^@@/.test(_line)) {\n          index.hunks.push(parseHunk());\n        } else if (_line && options.strict) {\n          // Ignore unexpected content unless in strict mode\n          throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n        } else {\n          i++;\n        }\n      }\n    } // Parses the --- and +++ headers, if none are found, no lines\n    // are consumed.\n\n\n    function parseFileHeader(index) {\n      var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)$/.exec(diffstr[i]);\n\n      if (fileHeader) {\n        var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n        var data = fileHeader[2].split('\\t', 2);\n        var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n\n        if (/^\".*\"$/.test(fileName)) {\n          fileName = fileName.substr(1, fileName.length - 2);\n        }\n\n        index[keyPrefix + 'FileName'] = fileName;\n        index[keyPrefix + 'Header'] = (data[1] || '').trim();\n        i++;\n      }\n    } // Parses a hunk\n    // This assumes that we are at the start of a hunk.\n\n\n    function parseHunk() {\n      var chunkHeaderIndex = i,\n          chunkHeaderLine = diffstr[i++],\n          chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n      var hunk = {\n        oldStart: +chunkHeader[1],\n        oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n        newStart: +chunkHeader[3],\n        newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n        lines: [],\n        linedelimiters: []\n      }; // Unified Diff Format quirk: If the chunk size is 0,\n      // the first number is one lower than one would expect.\n      // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n      if (hunk.oldLines === 0) {\n        hunk.oldStart += 1;\n      }\n\n      if (hunk.newLines === 0) {\n        hunk.newStart += 1;\n      }\n\n      var addCount = 0,\n          removeCount = 0;\n\n      for (; i < diffstr.length; i++) {\n        // Lines starting with '---' could be mistaken for the \"remove line\" operation\n        // But they could be the header for the next file. Therefore prune such cases out.\n        if (diffstr[i].indexOf('--- ') === 0 && i + 2 < diffstr.length && diffstr[i + 1].indexOf('+++ ') === 0 && diffstr[i + 2].indexOf('@@') === 0) {\n          break;\n        }\n\n        var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n\n        if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n          hunk.lines.push(diffstr[i]);\n          hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n          if (operation === '+') {\n            addCount++;\n          } else if (operation === '-') {\n            removeCount++;\n          } else if (operation === ' ') {\n            addCount++;\n            removeCount++;\n          }\n        } else {\n          break;\n        }\n      } // Handle the empty block count case\n\n\n      if (!addCount && hunk.newLines === 1) {\n        hunk.newLines = 0;\n      }\n\n      if (!removeCount && hunk.oldLines === 1) {\n        hunk.oldLines = 0;\n      } // Perform optional sanity checking\n\n\n      if (options.strict) {\n        if (addCount !== hunk.newLines) {\n          throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n        }\n\n        if (removeCount !== hunk.oldLines) {\n          throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n        }\n      }\n\n      return hunk;\n    }\n\n    while (i < diffstr.length) {\n      parseIndex();\n    }\n\n    return list;\n  }\n\n  // Iterator that traverses in the range of [min, max], stepping\n  // by distance from a given start position. I.e. for [0, 4], with\n  // start of 2, this will iterate 2, 3, 1, 4, 0.\n  function distanceIterator (start, minLine, maxLine) {\n    var wantForward = true,\n        backwardExhausted = false,\n        forwardExhausted = false,\n        localOffset = 1;\n    return function iterator() {\n      if (wantForward && !forwardExhausted) {\n        if (backwardExhausted) {\n          localOffset++;\n        } else {\n          wantForward = false;\n        } // Check if trying to fit beyond text length, and if not, check it fits\n        // after offset location (or desired location on first iteration)\n\n\n        if (start + localOffset <= maxLine) {\n          return localOffset;\n        }\n\n        forwardExhausted = true;\n      }\n\n      if (!backwardExhausted) {\n        if (!forwardExhausted) {\n          wantForward = true;\n        } // Check if trying to fit before text beginning, and if not, check it fits\n        // before offset location\n\n\n        if (minLine <= start - localOffset) {\n          return -localOffset++;\n        }\n\n        backwardExhausted = true;\n        return iterator();\n      } // We tried to fit hunk before text beginning and beyond text length, then\n      // hunk can't fit on the text. Return undefined\n\n    };\n  }\n\n  function applyPatch(source, uniDiff) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (typeof uniDiff === 'string') {\n      uniDiff = parsePatch(uniDiff);\n    }\n\n    if (Array.isArray(uniDiff)) {\n      if (uniDiff.length > 1) {\n        throw new Error('applyPatch only works with a single input.');\n      }\n\n      uniDiff = uniDiff[0];\n    } // Apply the diff to the input\n\n\n    var lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n        delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n        hunks = uniDiff.hunks,\n        compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) {\n      return line === patchContent;\n    },\n        errorCount = 0,\n        fuzzFactor = options.fuzzFactor || 0,\n        minLine = 0,\n        offset = 0,\n        removeEOFNL,\n        addEOFNL;\n    /**\n     * Checks if the hunk exactly fits on the provided location\n     */\n\n\n    function hunkFits(hunk, toPos) {\n      for (var j = 0; j < hunk.lines.length; j++) {\n        var line = hunk.lines[j],\n            operation = line.length > 0 ? line[0] : ' ',\n            content = line.length > 0 ? line.substr(1) : line;\n\n        if (operation === ' ' || operation === '-') {\n          // Context sanity check\n          if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n            errorCount++;\n\n            if (errorCount > fuzzFactor) {\n              return false;\n            }\n          }\n\n          toPos++;\n        }\n      }\n\n      return true;\n    } // Search best fit offsets for each hunk based on the previous ones\n\n\n    for (var i = 0; i < hunks.length; i++) {\n      var hunk = hunks[i],\n          maxLine = lines.length - hunk.oldLines,\n          localOffset = 0,\n          toPos = offset + hunk.oldStart - 1;\n      var iterator = distanceIterator(toPos, minLine, maxLine);\n\n      for (; localOffset !== undefined; localOffset = iterator()) {\n        if (hunkFits(hunk, toPos + localOffset)) {\n          hunk.offset = offset += localOffset;\n          break;\n        }\n      }\n\n      if (localOffset === undefined) {\n        return false;\n      } // Set lower text limit to end of the current hunk, so next ones don't try\n      // to fit over already patched text\n\n\n      minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n    } // Apply patch hunks\n\n\n    var diffOffset = 0;\n\n    for (var _i = 0; _i < hunks.length; _i++) {\n      var _hunk = hunks[_i],\n          _toPos = _hunk.oldStart + _hunk.offset + diffOffset - 1;\n\n      diffOffset += _hunk.newLines - _hunk.oldLines;\n\n      for (var j = 0; j < _hunk.lines.length; j++) {\n        var line = _hunk.lines[j],\n            operation = line.length > 0 ? line[0] : ' ',\n            content = line.length > 0 ? line.substr(1) : line,\n            delimiter = _hunk.linedelimiters[j];\n\n        if (operation === ' ') {\n          _toPos++;\n        } else if (operation === '-') {\n          lines.splice(_toPos, 1);\n          delimiters.splice(_toPos, 1);\n          /* istanbul ignore else */\n        } else if (operation === '+') {\n          lines.splice(_toPos, 0, content);\n          delimiters.splice(_toPos, 0, delimiter);\n          _toPos++;\n        } else if (operation === '\\\\') {\n          var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;\n\n          if (previousOperation === '+') {\n            removeEOFNL = true;\n          } else if (previousOperation === '-') {\n            addEOFNL = true;\n          }\n        }\n      }\n    } // Handle EOFNL insertion/removal\n\n\n    if (removeEOFNL) {\n      while (!lines[lines.length - 1]) {\n        lines.pop();\n        delimiters.pop();\n      }\n    } else if (addEOFNL) {\n      lines.push('');\n      delimiters.push('\\n');\n    }\n\n    for (var _k = 0; _k < lines.length - 1; _k++) {\n      lines[_k] = lines[_k] + delimiters[_k];\n    }\n\n    return lines.join('');\n  } // Wrapper that supports multiple file patches via callbacks.\n\n  function applyPatches(uniDiff, options) {\n    if (typeof uniDiff === 'string') {\n      uniDiff = parsePatch(uniDiff);\n    }\n\n    var currentIndex = 0;\n\n    function processIndex() {\n      var index = uniDiff[currentIndex++];\n\n      if (!index) {\n        return options.complete();\n      }\n\n      options.loadFile(index, function (err, data) {\n        if (err) {\n          return options.complete(err);\n        }\n\n        var updatedContent = applyPatch(data, index, options);\n        options.patched(index, updatedContent, function (err) {\n          if (err) {\n            return options.complete(err);\n          }\n\n          processIndex();\n        });\n      });\n    }\n\n    processIndex();\n  }\n\n  function structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n    if (!options) {\n      options = {};\n    }\n\n    if (typeof options.context === 'undefined') {\n      options.context = 4;\n    }\n\n    var diff = diffLines(oldStr, newStr, options);\n    diff.push({\n      value: '',\n      lines: []\n    }); // Append an empty value to make cleanup easier\n\n    function contextLines(lines) {\n      return lines.map(function (entry) {\n        return ' ' + entry;\n      });\n    }\n\n    var hunks = [];\n    var oldRangeStart = 0,\n        newRangeStart = 0,\n        curRange = [],\n        oldLine = 1,\n        newLine = 1;\n\n    var _loop = function _loop(i) {\n      var current = diff[i],\n          lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n      current.lines = lines;\n\n      if (current.added || current.removed) {\n        var _curRange;\n\n        // If we have previous context, start with that\n        if (!oldRangeStart) {\n          var prev = diff[i - 1];\n          oldRangeStart = oldLine;\n          newRangeStart = newLine;\n\n          if (prev) {\n            curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n            oldRangeStart -= curRange.length;\n            newRangeStart -= curRange.length;\n          }\n        } // Output our changes\n\n\n        (_curRange = curRange).push.apply(_curRange, _toConsumableArray(lines.map(function (entry) {\n          return (current.added ? '+' : '-') + entry;\n        }))); // Track the updated file position\n\n\n        if (current.added) {\n          newLine += lines.length;\n        } else {\n          oldLine += lines.length;\n        }\n      } else {\n        // Identical context lines. Track line changes\n        if (oldRangeStart) {\n          // Close out any changes that have been output (or join overlapping)\n          if (lines.length <= options.context * 2 && i < diff.length - 2) {\n            var _curRange2;\n\n            // Overlapping\n            (_curRange2 = curRange).push.apply(_curRange2, _toConsumableArray(contextLines(lines)));\n          } else {\n            var _curRange3;\n\n            // end the range and output\n            var contextSize = Math.min(lines.length, options.context);\n\n            (_curRange3 = curRange).push.apply(_curRange3, _toConsumableArray(contextLines(lines.slice(0, contextSize))));\n\n            var hunk = {\n              oldStart: oldRangeStart,\n              oldLines: oldLine - oldRangeStart + contextSize,\n              newStart: newRangeStart,\n              newLines: newLine - newRangeStart + contextSize,\n              lines: curRange\n            };\n\n            if (i >= diff.length - 2 && lines.length <= options.context) {\n              // EOF is inside this hunk\n              var oldEOFNewline = /\\n$/.test(oldStr);\n              var newEOFNewline = /\\n$/.test(newStr);\n              var noNlBeforeAdds = lines.length == 0 && curRange.length > hunk.oldLines;\n\n              if (!oldEOFNewline && noNlBeforeAdds && oldStr.length > 0) {\n                // special case: old has no eol and no trailing context; no-nl can end up before adds\n                // however, if the old file is empty, do not output the no-nl line\n                curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n              }\n\n              if (!oldEOFNewline && !noNlBeforeAdds || !newEOFNewline) {\n                curRange.push('\\\\ No newline at end of file');\n              }\n            }\n\n            hunks.push(hunk);\n            oldRangeStart = 0;\n            newRangeStart = 0;\n            curRange = [];\n          }\n        }\n\n        oldLine += lines.length;\n        newLine += lines.length;\n      }\n    };\n\n    for (var i = 0; i < diff.length; i++) {\n      _loop(i);\n    }\n\n    return {\n      oldFileName: oldFileName,\n      newFileName: newFileName,\n      oldHeader: oldHeader,\n      newHeader: newHeader,\n      hunks: hunks\n    };\n  }\n  function formatPatch(diff) {\n    var ret = [];\n\n    if (diff.oldFileName == diff.newFileName) {\n      ret.push('Index: ' + diff.oldFileName);\n    }\n\n    ret.push('===================================================================');\n    ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n    ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n    for (var i = 0; i < diff.hunks.length; i++) {\n      var hunk = diff.hunks[i]; // Unified Diff Format quirk: If the chunk size is 0,\n      // the first number is one lower than one would expect.\n      // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n      if (hunk.oldLines === 0) {\n        hunk.oldStart -= 1;\n      }\n\n      if (hunk.newLines === 0) {\n        hunk.newStart -= 1;\n      }\n\n      ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n      ret.push.apply(ret, hunk.lines);\n    }\n\n    return ret.join('\\n') + '\\n';\n  }\n  function createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n    return formatPatch(structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options));\n  }\n  function createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n    return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n  }\n\n  function arrayEqual(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    return arrayStartsWith(a, b);\n  }\n  function arrayStartsWith(array, start) {\n    if (start.length > array.length) {\n      return false;\n    }\n\n    for (var i = 0; i < start.length; i++) {\n      if (start[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function calcLineCount(hunk) {\n    var _calcOldNewLineCount = calcOldNewLineCount(hunk.lines),\n        oldLines = _calcOldNewLineCount.oldLines,\n        newLines = _calcOldNewLineCount.newLines;\n\n    if (oldLines !== undefined) {\n      hunk.oldLines = oldLines;\n    } else {\n      delete hunk.oldLines;\n    }\n\n    if (newLines !== undefined) {\n      hunk.newLines = newLines;\n    } else {\n      delete hunk.newLines;\n    }\n  }\n  function merge(mine, theirs, base) {\n    mine = loadPatch(mine, base);\n    theirs = loadPatch(theirs, base);\n    var ret = {}; // For index we just let it pass through as it doesn't have any necessary meaning.\n    // Leaving sanity checks on this to the API consumer that may know more about the\n    // meaning in their own context.\n\n    if (mine.index || theirs.index) {\n      ret.index = mine.index || theirs.index;\n    }\n\n    if (mine.newFileName || theirs.newFileName) {\n      if (!fileNameChanged(mine)) {\n        // No header or no change in ours, use theirs (and ours if theirs does not exist)\n        ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n        ret.newFileName = theirs.newFileName || mine.newFileName;\n        ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n        ret.newHeader = theirs.newHeader || mine.newHeader;\n      } else if (!fileNameChanged(theirs)) {\n        // No header or no change in theirs, use ours\n        ret.oldFileName = mine.oldFileName;\n        ret.newFileName = mine.newFileName;\n        ret.oldHeader = mine.oldHeader;\n        ret.newHeader = mine.newHeader;\n      } else {\n        // Both changed... figure it out\n        ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n        ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n        ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n        ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n      }\n    }\n\n    ret.hunks = [];\n    var mineIndex = 0,\n        theirsIndex = 0,\n        mineOffset = 0,\n        theirsOffset = 0;\n\n    while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n      var mineCurrent = mine.hunks[mineIndex] || {\n        oldStart: Infinity\n      },\n          theirsCurrent = theirs.hunks[theirsIndex] || {\n        oldStart: Infinity\n      };\n\n      if (hunkBefore(mineCurrent, theirsCurrent)) {\n        // This patch does not overlap with any of the others, yay.\n        ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n        mineIndex++;\n        theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n      } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n        // This patch does not overlap with any of the others, yay.\n        ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n        theirsIndex++;\n        mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n      } else {\n        // Overlap, merge as best we can\n        var mergedHunk = {\n          oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n          oldLines: 0,\n          newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n          newLines: 0,\n          lines: []\n        };\n        mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n        theirsIndex++;\n        mineIndex++;\n        ret.hunks.push(mergedHunk);\n      }\n    }\n\n    return ret;\n  }\n\n  function loadPatch(param, base) {\n    if (typeof param === 'string') {\n      if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n        return parsePatch(param)[0];\n      }\n\n      if (!base) {\n        throw new Error('Must provide a base reference or pass in a patch');\n      }\n\n      return structuredPatch(undefined, undefined, base, param);\n    }\n\n    return param;\n  }\n\n  function fileNameChanged(patch) {\n    return patch.newFileName && patch.newFileName !== patch.oldFileName;\n  }\n\n  function selectField(index, mine, theirs) {\n    if (mine === theirs) {\n      return mine;\n    } else {\n      index.conflict = true;\n      return {\n        mine: mine,\n        theirs: theirs\n      };\n    }\n  }\n\n  function hunkBefore(test, check) {\n    return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n  }\n\n  function cloneHunk(hunk, offset) {\n    return {\n      oldStart: hunk.oldStart,\n      oldLines: hunk.oldLines,\n      newStart: hunk.newStart + offset,\n      newLines: hunk.newLines,\n      lines: hunk.lines\n    };\n  }\n\n  function mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n    // This will generally result in a conflicted hunk, but there are cases where the context\n    // is the only overlap where we can successfully merge the content here.\n    var mine = {\n      offset: mineOffset,\n      lines: mineLines,\n      index: 0\n    },\n        their = {\n      offset: theirOffset,\n      lines: theirLines,\n      index: 0\n    }; // Handle any leading content\n\n    insertLeading(hunk, mine, their);\n    insertLeading(hunk, their, mine); // Now in the overlap content. Scan through and select the best changes from each.\n\n    while (mine.index < mine.lines.length && their.index < their.lines.length) {\n      var mineCurrent = mine.lines[mine.index],\n          theirCurrent = their.lines[their.index];\n\n      if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n        // Both modified ...\n        mutualChange(hunk, mine, their);\n      } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n        var _hunk$lines;\n\n        // Mine inserted\n        (_hunk$lines = hunk.lines).push.apply(_hunk$lines, _toConsumableArray(collectChange(mine)));\n      } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n        var _hunk$lines2;\n\n        // Theirs inserted\n        (_hunk$lines2 = hunk.lines).push.apply(_hunk$lines2, _toConsumableArray(collectChange(their)));\n      } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n        // Mine removed or edited\n        removal(hunk, mine, their);\n      } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n        // Their removed or edited\n        removal(hunk, their, mine, true);\n      } else if (mineCurrent === theirCurrent) {\n        // Context identity\n        hunk.lines.push(mineCurrent);\n        mine.index++;\n        their.index++;\n      } else {\n        // Context mismatch\n        conflict(hunk, collectChange(mine), collectChange(their));\n      }\n    } // Now push anything that may be remaining\n\n\n    insertTrailing(hunk, mine);\n    insertTrailing(hunk, their);\n    calcLineCount(hunk);\n  }\n\n  function mutualChange(hunk, mine, their) {\n    var myChanges = collectChange(mine),\n        theirChanges = collectChange(their);\n\n    if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n      // Special case for remove changes that are supersets of one another\n      if (arrayStartsWith(myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n        var _hunk$lines3;\n\n        (_hunk$lines3 = hunk.lines).push.apply(_hunk$lines3, _toConsumableArray(myChanges));\n\n        return;\n      } else if (arrayStartsWith(theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n        var _hunk$lines4;\n\n        (_hunk$lines4 = hunk.lines).push.apply(_hunk$lines4, _toConsumableArray(theirChanges));\n\n        return;\n      }\n    } else if (arrayEqual(myChanges, theirChanges)) {\n      var _hunk$lines5;\n\n      (_hunk$lines5 = hunk.lines).push.apply(_hunk$lines5, _toConsumableArray(myChanges));\n\n      return;\n    }\n\n    conflict(hunk, myChanges, theirChanges);\n  }\n\n  function removal(hunk, mine, their, swap) {\n    var myChanges = collectChange(mine),\n        theirChanges = collectContext(their, myChanges);\n\n    if (theirChanges.merged) {\n      var _hunk$lines6;\n\n      (_hunk$lines6 = hunk.lines).push.apply(_hunk$lines6, _toConsumableArray(theirChanges.merged));\n    } else {\n      conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n    }\n  }\n\n  function conflict(hunk, mine, their) {\n    hunk.conflict = true;\n    hunk.lines.push({\n      conflict: true,\n      mine: mine,\n      theirs: their\n    });\n  }\n\n  function insertLeading(hunk, insert, their) {\n    while (insert.offset < their.offset && insert.index < insert.lines.length) {\n      var line = insert.lines[insert.index++];\n      hunk.lines.push(line);\n      insert.offset++;\n    }\n  }\n\n  function insertTrailing(hunk, insert) {\n    while (insert.index < insert.lines.length) {\n      var line = insert.lines[insert.index++];\n      hunk.lines.push(line);\n    }\n  }\n\n  function collectChange(state) {\n    var ret = [],\n        operation = state.lines[state.index][0];\n\n    while (state.index < state.lines.length) {\n      var line = state.lines[state.index]; // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n\n      if (operation === '-' && line[0] === '+') {\n        operation = '+';\n      }\n\n      if (operation === line[0]) {\n        ret.push(line);\n        state.index++;\n      } else {\n        break;\n      }\n    }\n\n    return ret;\n  }\n\n  function collectContext(state, matchChanges) {\n    var changes = [],\n        merged = [],\n        matchIndex = 0,\n        contextChanges = false,\n        conflicted = false;\n\n    while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n      var change = state.lines[state.index],\n          match = matchChanges[matchIndex]; // Once we've hit our add, then we are done\n\n      if (match[0] === '+') {\n        break;\n      }\n\n      contextChanges = contextChanges || change[0] !== ' ';\n      merged.push(match);\n      matchIndex++; // Consume any additions in the other block as a conflict to attempt\n      // to pull in the remaining context after this\n\n      if (change[0] === '+') {\n        conflicted = true;\n\n        while (change[0] === '+') {\n          changes.push(change);\n          change = state.lines[++state.index];\n        }\n      }\n\n      if (match.substr(1) === change.substr(1)) {\n        changes.push(change);\n        state.index++;\n      } else {\n        conflicted = true;\n      }\n    }\n\n    if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n      conflicted = true;\n    }\n\n    if (conflicted) {\n      return changes;\n    }\n\n    while (matchIndex < matchChanges.length) {\n      merged.push(matchChanges[matchIndex++]);\n    }\n\n    return {\n      merged: merged,\n      changes: changes\n    };\n  }\n\n  function allRemoves(changes) {\n    return changes.reduce(function (prev, change) {\n      return prev && change[0] === '-';\n    }, true);\n  }\n\n  function skipRemoveSuperset(state, removeChanges, delta) {\n    for (var i = 0; i < delta; i++) {\n      var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n\n      if (state.lines[state.index + i] !== ' ' + changeContent) {\n        return false;\n      }\n    }\n\n    state.index += delta;\n    return true;\n  }\n\n  function calcOldNewLineCount(lines) {\n    var oldLines = 0;\n    var newLines = 0;\n    lines.forEach(function (line) {\n      if (typeof line !== 'string') {\n        var myCount = calcOldNewLineCount(line.mine);\n        var theirCount = calcOldNewLineCount(line.theirs);\n\n        if (oldLines !== undefined) {\n          if (myCount.oldLines === theirCount.oldLines) {\n            oldLines += myCount.oldLines;\n          } else {\n            oldLines = undefined;\n          }\n        }\n\n        if (newLines !== undefined) {\n          if (myCount.newLines === theirCount.newLines) {\n            newLines += myCount.newLines;\n          } else {\n            newLines = undefined;\n          }\n        }\n      } else {\n        if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n          newLines++;\n        }\n\n        if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n          oldLines++;\n        }\n      }\n    });\n    return {\n      oldLines: oldLines,\n      newLines: newLines\n    };\n  }\n\n  // See: http://code.google.com/p/google-diff-match-patch/wiki/API\n  function convertChangesToDMP(changes) {\n    var ret = [],\n        change,\n        operation;\n\n    for (var i = 0; i < changes.length; i++) {\n      change = changes[i];\n\n      if (change.added) {\n        operation = 1;\n      } else if (change.removed) {\n        operation = -1;\n      } else {\n        operation = 0;\n      }\n\n      ret.push([operation, change.value]);\n    }\n\n    return ret;\n  }\n\n  function convertChangesToXML(changes) {\n    var ret = [];\n\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n\n      if (change.added) {\n        ret.push('<ins>');\n      } else if (change.removed) {\n        ret.push('<del>');\n      }\n\n      ret.push(escapeHTML(change.value));\n\n      if (change.added) {\n        ret.push('</ins>');\n      } else if (change.removed) {\n        ret.push('</del>');\n      }\n    }\n\n    return ret.join('');\n  }\n\n  function escapeHTML(s) {\n    var n = s;\n    n = n.replace(/&/g, '&amp;');\n    n = n.replace(/</g, '&lt;');\n    n = n.replace(/>/g, '&gt;');\n    n = n.replace(/\"/g, '&quot;');\n    return n;\n  }\n\n  exports.Diff = Diff;\n  exports.applyPatch = applyPatch;\n  exports.applyPatches = applyPatches;\n  exports.canonicalize = canonicalize;\n  exports.convertChangesToDMP = convertChangesToDMP;\n  exports.convertChangesToXML = convertChangesToXML;\n  exports.createPatch = createPatch;\n  exports.createTwoFilesPatch = createTwoFilesPatch;\n  exports.diffArrays = diffArrays;\n  exports.diffChars = diffChars;\n  exports.diffCss = diffCss;\n  exports.diffJson = diffJson;\n  exports.diffLines = diffLines;\n  exports.diffSentences = diffSentences;\n  exports.diffTrimmedLines = diffTrimmedLines;\n  exports.diffWords = diffWords;\n  exports.diffWordsWithSpace = diffWordsWithSpace;\n  exports.merge = merge;\n  exports.parsePatch = parsePatch;\n  exports.structuredPatch = structuredPatch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","function pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_classes(s,r){return Array.isArray(s)?pug_classes_array(s,r):s&&\"object\"==typeof s?pug_classes_object(s):s||\"\"}\nfunction pug_classes_array(r,a){for(var s,e=\"\",u=\"\",c=Array.isArray(a),g=0;g<r.length;g++)(s=pug_classes(r[g]))&&(c&&a[g]&&(s=pug_escape(s)),e=e+u+s,u=\" \");return e}\nfunction pug_classes_object(r){var a=\"\",n=\"\";for(var o in r)o&&r[o]&&pug_has_own_property.call(r,o)&&(a=a+n+o,n=\" \");return a}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_has_own_property=Object.prototype.hasOwnProperty;\nvar pug_match_html=/[\"&<>]/;\nfunction pug_rethrow(n,e,r,t){if(!(n instanceof Error))throw n;if(!(\"undefined\"==typeof window&&e||t))throw n.message+=\" on line \"+r,n;try{t=t||global[\"require\"](\"fs\").readFileSync(e,\"utf8\")}catch(e){pug_rethrow(n,null,r)}var i=3,a=t.split(\"\\n\"),o=Math.max(r-i,0),h=Math.min(a.length,r+i),i=a.slice(o,h).map(function(n,e){var t=e+o+1;return(t==r?\"  > \":\"    \")+t+\"| \"+n}).join(\"\\n\");throw n.path=e,n.message=(e||\"Pug\")+\":\"+r+\"\\n\"+i+\"\\n\\n\"+n.message,n}function sentencetableTemplate(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;var pug_debug_filename, pug_debug_line;try {var pug_debug_sources = {\"frontend-views\\u002F\\u002Fsentencetable.pug\":\"table.sentence-table\\n    colgroup\\n        col.selected-toggle.narrow\\n        each field in fields\\n            col(class=(fieldClasses[field] || ''))\\n    tbody\\n        tr\\n            th\\n                -\\u002F\\u002F empty\\n            each field in fields\\n                th\\n                    =field\\n        each sentence in sentences\\n            tr\\n                td\\n                    input(type=\\\"checkbox\\\" checked=\\\"\\\" data-sentence_id=sentence.data._id)\\n                each field in fields\\n                    td\\n                        =sentence.data[field]\\n                \\n\"};\n;var locals_for_with = (locals || {});(function (fieldClasses, fields, sentences) {;pug_debug_line = 1;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctable class=\\\"sentence-table\\\"\\u003E\";\n;pug_debug_line = 2;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccolgroup\\u003E\";\n;pug_debug_line = 3;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccol class=\\\"selected-toggle narrow\\\"\\u002F\\u003E\";\n;pug_debug_line = 4;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var field = $$obj[pug_index0];\n;pug_debug_line = 5;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccol\" + (pug_attr(\"class\", pug_classes([(fieldClasses[field] || '')], [true]), false, false)) + \"\\u002F\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index0];\n;pug_debug_line = 5;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccol\" + (pug_attr(\"class\", pug_classes([(fieldClasses[field] || '')], [true]), false, false)) + \"\\u002F\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Fcolgroup\\u003E\";\n;pug_debug_line = 6;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctbody\\u003E\";\n;pug_debug_line = 7;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctr\\u003E\";\n;pug_debug_line = 8;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cth\\u003E\";\n;pug_debug_line = 9;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// empty\npug_html = pug_html + \"\\u003C\\u002Fth\\u003E\";\n;pug_debug_line = 10;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index1 = 0, $$l = $$obj.length; pug_index1 < $$l; pug_index1++) {\n        var field = $$obj[pug_index1];\n;pug_debug_line = 11;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cth\\u003E\";\n;pug_debug_line = 12;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = field) ? \"\" : pug_interp)) + \"\\u003C\\u002Fth\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index1 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index1];\n;pug_debug_line = 11;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cth\\u003E\";\n;pug_debug_line = 12;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = field) ? \"\" : pug_interp)) + \"\\u003C\\u002Fth\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftr\\u003E\";\n;pug_debug_line = 13;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate sentences\n;(function(){\n  var $$obj = sentences;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index2 = 0, $$l = $$obj.length; pug_index2 < $$l; pug_index2++) {\n        var sentence = $$obj[pug_index2];\n;pug_debug_line = 14;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctr\\u003E\";\n;pug_debug_line = 15;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 16;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cinput\" + (\" type=\\\"checkbox\\\" checked=\\\"\\\"\"+pug_attr(\"data-sentence_id\", sentence.data._id, true, false)) + \"\\u002F\\u003E\\u003C\\u002Ftd\\u003E\";\n;pug_debug_line = 17;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index3 = 0, $$l = $$obj.length; pug_index3 < $$l; pug_index3++) {\n        var field = $$obj[pug_index3];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index3 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index3];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftr\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index2 in $$obj) {\n      $$l++;\n      var sentence = $$obj[pug_index2];\n;pug_debug_line = 14;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctr\\u003E\";\n;pug_debug_line = 15;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 16;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cinput\" + (\" type=\\\"checkbox\\\" checked=\\\"\\\"\"+pug_attr(\"data-sentence_id\", sentence.data._id, true, false)) + \"\\u002F\\u003E\\u003C\\u002Ftd\\u003E\";\n;pug_debug_line = 17;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index4 = 0, $$l = $$obj.length; pug_index4 < $$l; pug_index4++) {\n        var field = $$obj[pug_index4];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index4 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index4];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftr\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftbody\\u003E\\u003C\\u002Ftable\\u003E\";}.call(this,\"fieldClasses\" in locals_for_with?locals_for_with.fieldClasses:typeof fieldClasses!==\"undefined\"?fieldClasses:undefined,\"fields\" in locals_for_with?locals_for_with.fields:typeof fields!==\"undefined\"?fields:undefined,\"sentences\" in locals_for_with?locals_for_with.sentences:typeof sentences!==\"undefined\"?sentences:undefined));} catch (err) {pug_rethrow(err, pug_debug_filename, pug_debug_line, pug_debug_sources[pug_debug_filename]);};return pug_html;}","import { diffWords } from 'diff';\n\nimport { sentencetableTemplate } from './templates/sentencetable';\n\nclass View {\n  constructor(baseElement) {\n    this.root = baseElement;\n    this.elements = {};\n    this.elementGroups = {};\n    this.listeners = {};\n  }\n\n  hideElement(name) {\n    this.elements[name].style.display = 'none';\n  }\n\n  showElement(name) {\n    this.elements[name].style.display = '';\n  }\n\n  defineElementGroup(groupName, elementNameArray) {\n    this.elementGroups[groupName] = elementNameArray;\n  }\n  showGroup(groupName) {\n    this.elementGroups[groupName].forEach((elementName) =>\n      this.showElement(elementName)\n    );\n  }\n  hideGroup(groupName) {\n    this.elementGroups[groupName].forEach((elementName) =>\n      this.hideElement(elementName)\n    );\n  }\n\n  get exists() {\n    return !!this.root;\n  }\n\n  on(event, callback) {\n    if (!this.listeners[event]) {\n      this.listeners[event] = [];\n    }\n\n    this.listeners[event].push(callback);\n  }\n\n  trigger(event, data) {\n    const listeners = this.listeners[event];\n    if (listeners) {\n      listeners.forEach((callback) => callback(data));\n    }\n  }\n\n  eventOnRoot(event, callback) {\n    this.root.addEventListener(event, (e) => {\n      callback();\n    });\n  }\n}\n\n// FORMS\n\nclass FormView extends View {\n  onFormData(callback) {\n    this.root.addEventListener('submit', (e) => {\n      e.preventDefault();\n\n      callback(this.getFormData());\n    });\n  }\n\n  getFormData() {\n    const inputs = Array.from(this.root.querySelectorAll('input'));\n    const data = {};\n\n    inputs.forEach((el) => {\n      // TODO suggestion from Heather: switch this to always use `name`. I'll have to check with Tom first, though (because it breaks existing code)\n      const name = el.name ? el.name : el.id;\n\n      // TODO design question: should we handle situations where there's multiple inputs with the same name? (turn it into an array? ignore them?)\n      data[name] = el.value;\n    });\n\n    return data;\n  }\n\n  clearFormData() {\n    const inputs = Array.from(this.root.querySelectorAll('input'));\n    inputs.forEach((el) => {\n      el.value = '';\n    });\n  }\n}\n\n// GENERIC DOM MANIP\n\nexport class LogoutView extends View {}\n\nexport class AlertView extends View {\n  static hide() {\n    const el = document.querySelector('.alert');\n    if (el) el.parentElement.removeChild(el);\n  }\n\n  // type is 'success' or 'error'\n  static show(type, msg) {\n    this.hide();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n    window.setTimeout(() => {\n      this.hide();\n    }, 3000);\n  }\n}\n\nwindow.onerror = (err) => AlertView.show('error', err);\n\nexport class DataParserView extends View {\n  static get(input_name) {\n    return JSON.parse(\n      document.querySelector(`.js-value[name=\"${input_name}\"]`).value\n    );\n  }\n}\n\n// AUTH VIEWS -----------\n\nexport class LoginFormView extends FormView {}\n\nexport class SignupFormView extends FormView {}\n\n// CREATE SENTENCE VIEWS --------\n\nexport class CreateSentenceFormView extends FormView {}\n\n// CREATE TASK VIEWS --------\n\nclass CreateTaskView extends View {\n  getValues(selector) {\n    const nonToggleInputs = Array.from(\n      this.root.querySelectorAll(`${selector}`)\n    );\n    const data = {};\n\n    nonToggleInputs.forEach((el) => {\n      const name = el.name;\n      if (el.value) {\n        data[name] = el.value;\n      }\n    });\n\n    return data;\n  }\n}\n\nexport class CreateTaskRandomView extends CreateTaskView {\n  constructor(element) {\n    super(element);\n\n    //Get inputs (.elements name must match their corresponding switch's name)\n    this.elements.vivaRefLow = this.root.querySelector('.vivaref-low');\n    this.elements.vivaRefHigh = this.root.querySelector('.vivaref-high');\n    this.elements.levelLow = this.root.querySelector('.level-low');\n    this.elements.levelHigh = this.root.querySelector('.level-high');\n\n    this.elements.switches = {};\n    this.elements.switches.vivaRefLow = this.root\n      .querySelector('.check-vivaref-low')\n      .getElementsByTagName('input');\n    this.elements.switches.vivaRefHigh = this.root\n      .querySelector('.check-vivaref-high')\n      .getElementsByTagName('input');\n    this.elements.switches.levelLow = this.root\n      .querySelector('.check-level-low')\n      .getElementsByTagName('input');\n    this.elements.switches.levelHigh = this.root\n      .querySelector('.check-level-high')\n      .getElementsByTagName('input');\n\n    const switches = Array.from(\n      this.root.querySelectorAll('input[type=checkbox]')\n    );\n\n    //Prep DOM\n    switches.forEach((e) => this.showHide(e));\n\n    //Add event listener for change\n    switches.forEach((e) => {\n      e.addEventListener('change', (e) => this.showHide(e.srcElement));\n    });\n  }\n\n  //Function to return form data on submit\n\n  onCreateTaskRandomValues = (callback) => {\n    this.root.addEventListener('submit', (e) => {\n      e.preventDefault();\n      const vivaRefRes = this.getUpperLower(\n        this.elements.switches.vivaRefLow[0],\n        this.elements.switches.vivaRefHigh[0],\n        'vivaRef'\n      );\n      const levelRes = this.getUpperLower(\n        this.elements.switches.levelLow[0],\n        this.elements.switches.levelHigh[0],\n        'level'\n      );\n      const nonToggleValues = this.getValues('.sentence-details');\n      const paramsObject = { ...vivaRefRes, ...levelRes, ...nonToggleValues };\n      const params = new URLSearchParams(paramsObject);\n\n      const searchParams = decodeURIComponent(params.toString());\n      const taskDetails = this.getValues('.task-details');\n\n      callback(searchParams, taskDetails);\n    });\n  };\n\n  getUpperLower(checkOne, checkTwo, searchParam) {\n    const lowerValue = this.elements[checkOne.name].value;\n    const higherValue = this.elements[checkTwo.name].value;\n\n    if (checkTwo.checked) {\n      const res = `{\"${searchParam}[gte]\": ${lowerValue},\n\t\t  \"${searchParam}[lte]\": ${higherValue}}`;\n      return JSON.parse(res);\n    } else if (checkOne.checked) {\n      const res = JSON.parse(`{\"${searchParam}\" : ${lowerValue}}`);\n      return res;\n    } else {\n      return null;\n    }\n  }\n\n  showHide = (el) => {\n    if (el.checked) {\n      this.showElement(el.name);\n    } else {\n      this.hideElement(el.name);\n    }\n  };\n}\n\nexport class CreateTaskChooseSentenceView extends CreateTaskView {\n  constructor(element) {\n    super(element);\n\n    this.elements.tableParent = this.root.querySelector(\n      '.sentence-table-holder'\n    );\n    this.elements.saveButton = this.root.querySelector(\n      'button.set-tasks-button-choose-sentences'\n    );\n\n    this.getFilterElements().forEach((el) => {\n      el.addEventListener('change', this.updateFilters.bind(this));\n    });\n\n    this.elements.saveButton.addEventListener('click', () =>\n      this.trigger('save', {})\n    );\n\n    this.elements.tableParent.addEventListener('change', (evt) => {\n      if (evt.target.tagName == 'INPUT' && evt.target.type == 'checkbox') {\n        const sentenceId = evt.target.dataset.sentence_id;\n        if (sentenceId) {\n          const triggerType = evt.target.checked\n            ? 'add_sentence'\n            : 'remove_sentence';\n          this.trigger(triggerType, { sentenceId });\n        }\n      }\n    });\n  }\n\n  getFilterElements() {\n    return Array.from(this.root.querySelectorAll('.filter-selector'));\n  }\n\n  updateFilters() {\n    const filterState = {};\n    this.getFilterElements().forEach((el) => (filterState[el.name] = el.value));\n\n    this.trigger('filter_update', filterState);\n  }\n\n  updateDisplay(sentences, toSave) {\n    const fields = [\n      'grammar',\n      'vivaRef',\n      'tense',\n      'level',\n      'sentence',\n      'translation',\n    ];\n    const fieldClasses = {\n      grammar: 'narrow',\n      vivaRef: 'narrow',\n      tense: 'narrow',\n      level: 'narrow',\n    };\n\n    this.elements.tableParent.innerHTML = sentencetableTemplate({\n      fields,\n      sentences,\n      fieldClasses,\n    });\n  }\n}\n\n// TRAINING VIEW\n\nexport class TrainingView extends FormView {\n  constructor(element) {\n    super(element);\n\n    // get our sub-elements\n    this.elements.prompt = this.root.querySelector('.card-title');\n    this.elements.input = this.root.querySelector('[name=student_answer]');\n    this.elements.answer_feedback = this.root.querySelector('.answer-feedback');\n    this.elements.answer_feedback_inner = this.root.querySelector(\n      '.answer-feedback-inner'\n    );\n    this.elements.correct_answer = this.root.querySelector('.correct-answer');\n    this.elements.correct_answer_inner = this.root.querySelector(\n      '.correct-answer-inner'\n    );\n    this.elements.right_count = this.root.querySelector('.right-count');\n    this.elements.total_count = this.root.querySelector('.total-count');\n    this.elements.submit_button = this.root.querySelector(\n      'button[type=submit]'\n    );\n    this.elements.next_button = this.root.querySelector(\n      'button[type=button].btn-next'\n    );\n\n    // define some groups of elements\n    this.defineElementGroup('feedback', ['answer_feedback', 'next_button']);\n    this.defineElementGroup('dataEntry', ['input', 'submit_button']);\n\n    // prep DOM\n    this.hideGroup('feedback');\n    this.clearAnswerText();\n\n    // set up event listeners\n    this.onFormData((data) => this.handleStudentAnswer(data));\n    this.elements.next_button.addEventListener('click', () => {\n      this.hideGroup('feedback');\n      this.showGroup('dataEntry');\n\n      this.clearAnswerText();\n\n      this.trigger('next');\n    });\n  }\n\n  updateCounts(right, total) {\n    this.elements.right_count.innerText = right;\n    this.elements.total_count.innerText = total;\n  }\n\n  clearAnswerText() {\n    this.elements.input.value = '';\n    this.elements.correct_answer_inner.innerText = '';\n  }\n\n  handleStudentAnswer({ student_answer }) {\n    // CALCULATE VARIOUS DATA (maybe could live outside of the View layer?)\n\n    function normalize(str) {\n      // normalize to ONLY letters and numbers (cross-language), lowercase\n      // this'll require fairly modern JS, incidentally \n      return str.replace(/[^\\p{Letter}\\p{Number}]/ugi, '').toLowerCase()\n    }\n\n    // TODO DESIGN QUESTION: where should isCorrect be calculated? what code owns that logic?\n    const isCorrect = normalize(student_answer) == normalize(this.answer);\n\n    const diffs = diffWords(this.answer, student_answer, { ignoreCase: true });\n\n    // DISPLAY CALCULATED DATA\n    {\n      // NOTE from Heather to Tom:\n      //   this method call looks a little over-fancy. feel free to refactor into something easier to read. hopefully I've added enough comments to make it understandable?\n      this.setAsHighlightedSpan(\n        // element name\n        'answer_feedback_inner',\n        // pass only the diff entries that we want to display\n        diffs.filter((diff) => !diff.removed),\n        // CSS class name callback\n        (diff) => (diff.added ? 'highlight-wrong' : 'highlight-right')\n      );\n\n      this.setAsHighlightedSpan(\n        'correct_answer_inner',\n        diffs.filter((diff) => !diff.added),\n        (diff) => (diff.removed ? 'highlight-wrong' : 'highlight-right')\n      );\n    }\n\n    // SET UP DOM STATE\n    {\n      this.hideGroup('dataEntry');\n      this.showGroup('feedback');\n\n      this.elements.next_button.focus();\n\n      this.trigger('answer', { student_answer, isCorrect });\n    }\n  }\n\n  // this method replaces the content of an element with a set of highlighted/styled spans, such as you might want if you're presenting diff output.\n  // also, this could live in one of the parent classes, if it ends up being useful elsewhere.\n  //\n  // `elementName` is the string name of some element that this view tracks\n  // `array` is expected to be an array of items with at least a `value` property\n  // `classNameCallback` is a callback that spits out the CSS classes, space-separated, that go with each entry of the array\n  setAsHighlightedSpan(elementName, array, classNameCallback) {\n    const baseEl = this.elements[elementName];\n\n    // keep track of the index so that we can do a .innerText later (thus bypassing issues with HTML injection / XSS)\n    const spans = array.map((entry, index) => {\n      const elClass = classNameCallback(entry);\n      // using some index-juggling in order to avoid having to worry about HTML injection\n      return `<span class=\"${elClass}\">${index}</span>`;\n    });\n\n    baseEl.innerHTML = spans.join('');\n\n    // now we can safely assign user-defined text, via `.innerText` (which doesn't get parsed as HTML)\n    Array.from(baseEl.querySelectorAll('span')).forEach((span) => {\n      span.innerText = array[span.innerText].value;\n    });\n  }\n\n  finish() {\n    this.prompt = 'done';\n    this.hideGroup('dataEntry');\n    this.hideGroup('feedback');\n  }\n\n  get prompt() {\n    return this.elements.prompt.innerText;\n  }\n\n  set prompt(value) {\n    return (this.elements.prompt.innerText = value);\n  }\n}\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","module.exports = require('./lib/axios');","import { AlertView, DataParserView } from './views.js';\nimport axios from 'axios';\n\nclass ModelApiError extends Error {}\n\n// parent class for models. includes some utility methods, and such\n//\n// if we wanted to get fancy, we might consider picking up the mongoose model definitions, and making use of that somehow.\n// but, that seems like it might take more effort than it's worth, at least until we start needing client-side validation\nclass Model {\n  constructor(data) {\n    this.data = data;\n  }\n\n  // can throw, catch in the Controller layer\n  static async sendApiRequest(url, method, data) {\n    try {\n      const res = await axios({\n        method,\n        url,\n        data,\n      });\n      if (res.data.status == 'success') {\n        return res;\n      }\n\n      // TODO question for Tom: what should we pass as the error message here?\n      throw new ModelApiError('API failure');\n    } catch (err) {\n      throw new ModelApiError(err.response.data.message);\n    }\n  }\n\n  // returns an array of instantiated objects, based on JSON embedded in a specific DOM element\n  static getLocal(name) {\n    // this is *maybe* not as theoretically clean to have a Model call into a View, but since we're storing global data in certain DOM elements, it works well in practice\n\n    var data = DataParserView.get(name);\n    if (!(data instanceof Array)) {\n      data = [data];\n    }\n    return data.map((single) => new this(single));\n  }\n}\n\nexport class AuthModel extends Model {\n  static async login(email, password) {\n    return this.sendApiRequest('api/v1/users/login', 'POST', {\n      email,\n      password,\n    });\n  }\n\n  static async logout() {\n    return this.sendApiRequest('/api/v1/users/logout', 'GET');\n  }\n\n  static async signup(name, email, password, passwordConfirm, classCode) {\n    return this.sendApiRequest('/api/v1/users/signup', 'POST', {\n      name,\n      email,\n      password,\n      passwordConfirm,\n      classCode,\n    });\n  }\n}\n\nexport class CreateTaskModel extends Model {}\n\nexport class CreateSentenceModel extends Model {\n  // can throw, catch in the Controller layer\n  static async create(sentence, translation, level, vivaRef, tense, grammar) {\n    const data = {\n      sentence,\n      translation,\n      level,\n      vivaRef,\n      grammar,\n      tense,\n    };\n\n    return this.sendApiRequest('/api/v1/sentences', 'POST', data);\n  }\n}\n\n// TODO maybe move some of the data from the controller into this?\nexport class StudentResultsModel extends Model {\n  static async sendResults(correctCount, wrongCount, studentSentences) {\n    const payload = {\n      correctCount: this.correctCount,\n      wrongCount: this.wrongCount,\n      studentSentences: this.finishedSentences,\n    };\n\n    return this.sendApiRequest('TODO-PLACEHOLDER', 'POST', payload);\n  }\n}\n\nexport class SentenceModel extends Model {\n  // type is 'gapped' or 'translation'\n  subclassAs(type) {\n    switch (type) {\n      case 'gapped':\n        return new GappedSentenceModel(this.data);\n      case 'translation':\n        return new TranslationSentenceModel(this.data);\n    }\n  }\n  get prompt() {\n    return this.data.sentence;\n  }\n\n  get answer() {\n    return this.data.translation;\n  }\n\n  static async fetchAll() {\n    const res = await this.sendApiRequest('api/v1/sentences', 'GET', {});\n    const sentences = res.data.data.data;\n    return sentences.map((sentenceData) => new this(sentenceData));\n  }\n}\n\nclass GappedSentenceModel extends SentenceModel {\n  constructor(data) {\n    super(data);\n\n    const words = this.data.sentence.trim().split(/\\s+/g);\n    const gapIndex = Math.floor(Math.random() * words.length);\n\n    // TODO handle punctuation\n    const gapWord = words[gapIndex];\n    words[gapIndex] = '___';\n\n    this.gapWord = gapWord;\n    this.gappedPrompt = words.join(' ');\n  }\n\n  get prompt() {\n    return this.gappedPrompt;\n  }\n\n  get answer() {\n    return this.gapWord;\n  }\n}\n\nclass TranslationSentenceModel extends SentenceModel {}\n","import {\n  LoginFormView,\n  TrainingView,\n  CreateSentenceFormView,\n  DataParserView,\n  AlertView,\n  LogoutView,\n  SignupFormView,\n  CreateTaskRandomView,\n  CreateTaskChooseSentenceView,\n} from './views.js';\nimport {\n  AuthModel,\n  SentenceModel,\n  CreateSentenceModel,\n  StudentResultsModel,\n  CreateTaskModel,\n} from './models.js';\n\n// parent class for controllers. Not much needs to be in here, I don't think, so leave it empty.\nclass Controller {\n  constructor(viewBaseElement) {\n    const viewClass = this.getViewClass();\n    this.view = new viewClass(viewBaseElement);\n  }\n}\n\nexport class LoginController extends Controller {\n  getViewClass() {\n    return LoginFormView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onFormData(async ({ email, password }) => {\n      try {\n        await AuthModel.login(email, password);\n\n        AlertView.show('success', 'Logged in successfully!');\n        window.setTimeout(() => {\n          location.assign('/');\n        }, 1500);\n      } catch (err) {\n        AlertView.show('error', err.message);\n      }\n    });\n  }\n}\n\nexport class LogoutController extends Controller {\n  getViewClass() {\n    return LogoutView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.eventOnRoot('click', async () => {\n      try {\n        await AuthModel.logout();\n\n        AlertView.show('success', 'Logged out!');\n        window.setTimeout(() => {\n          location.assign('/login');\n        }, 1500);\n      } catch (err) {\n        AlertView.show('error', err.message);\n      }\n    });\n  }\n}\n\nexport class SignupController extends Controller {\n  getViewClass() {\n    return SignupFormView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onFormData(\n      async ({ name, email, password, passwordConfirm, classCode }) => {\n        try {\n          await AuthModel.signup(\n            name,\n            email,\n            password,\n            passwordConfirm,\n            classCode\n          );\n\n          AlertView.show('success', 'Signed up successfully!');\n          window.setTimeout(() => {\n            location.assign('/');\n          }, 1500);\n        } catch (err) {\n          AlertView.show('error', err.message);\n        }\n      }\n    );\n  }\n}\n\nexport class CreateSentenceController extends Controller {\n  getViewClass() {\n    return CreateSentenceFormView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onFormData(\n      async ({ sentence, translation, level, vivaRef, tense, grammar }) => {\n        try {\n          const res = await CreateSentenceModel.create(\n            sentence,\n            translation,\n            level,\n            vivaRef,\n            tense,\n            grammar\n          );\n          this.view.clearFormData();\n          if (res) {\n            AlertView.show('success', 'Sentence created');\n          }\n        } catch (err) {\n          AlertView.show('error', err.message);\n        }\n      }\n    );\n  }\n}\n\nexport class CreateTaskRandomController extends Controller {\n  getViewClass() {\n    return CreateTaskRandomView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onCreateTaskRandomValues(async (searchParams, taskDetails) => {\n      try {\n        //Get sentences from API\n        const sentencesRes = await CreateTaskModel.sendApiRequest(\n          `/api/v1/sentences?${searchParams}`,\n          'GET'\n        );\n        // Add sentence ID array to req.body for task creation\n        taskDetails.sentences = sentencesRes.data.data.data.map((e) => e._id);\n\n        //Create task\n        const createTask = await CreateTaskModel.sendApiRequest(\n          '/api/v1/tasks',\n          'POST',\n          taskDetails\n        );\n        if (createTask) {\n          AlertView.show('success', 'Task created');\n        }\n      } catch (err) {\n        AlertView.show('error', err.message);\n      }\n    });\n  }\n}\n\nexport class TrainController extends Controller {\n  getViewClass() {\n    return TrainingView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    const exerciseType = DataParserView.get('exercise');\n\n    this.sentences = SentenceModel.getLocal('sentences').map((sent) =>\n      sent.subclassAs(exerciseType)\n    );\n    this.finishedSentences = [];\n\n    this.initialCount = this.sentences.length;\n\n    this.rightCount = 0;\n    this.wrongCount = 0;\n\n    this.view.updateCounts(this.rightCount, this.initialCount);\n\n    this.view.on('answer', this.doAnswer.bind(this));\n    this.view.on('next', this.doNextSentence.bind(this));\n\n    this.doNextSentence();\n  }\n\n  doAnswer({ student_answer, isCorrect }) {\n    const desiredReaskLength = 3;\n\n    const sentenceObject = this.sentences.shift();\n    this.finishedSentences.push({\n      sentence: sentenceObject.data,\n      student_answer,\n      isCorrect,\n    });\n\n    if (isCorrect) {\n      AlertView.show('success', 'Correct Answer');\n      this.rightCount++;\n    } else {\n      AlertView.show('error', 'Incorrect Answer');\n      this.wrongCount++;\n\n      const insertionIndex = Math.min(\n        this.sentences.length,\n        desiredReaskLength\n      );\n      this.sentences.splice(insertionIndex, 0, sentenceObject);\n    }\n\n    this.view.updateCounts(this.rightCount, this.initialCount);\n  }\n\n  doNextSentence() {\n    console.log(this.sentences.length);\n    console.log(this.sentences[0]);\n    if (!this.sentences[0]) {\n      this.view.finish();\n      // empty 'then' just so we trigger the async function\n      this.sendResultsToServer().then((_) => _);\n      return;\n    }\n\n    const sentence = this.sentences[0];\n\n    this.view.prompt = sentence.prompt;\n    this.view.answer = sentence.answer;\n  }\n\n  async sendResultsToServer() {\n    try {\n      await StudentResultsModel.send(\n        this.correctCount,\n        this.wrongCount,\n        this.finishedSentences\n      );\n      // do we need to show feedback or anything?\n    } catch (err) {\n      AlertView.show('error', err.message);\n    }\n  }\n}\n\nexport class CreateTaskChooseSentenceController extends Controller {\n  getViewClass() {\n    return CreateTaskChooseSentenceView;\n  }\n\n  constructor(viewBaseElement) {\n    super(viewBaseElement);\n\n    this.view.on('filter_update', (filterData) => {\n      const tmp = this.sentences.filter((sent) => {\n        if (\n          this.sentencesToSave.some((other) => other.data._id == sent.data._id)\n        ) {\n          return true;\n        }\n        for (let key in filterData) {\n          if (filterData[key] == '') {\n            continue;\n          }\n          if (sent.data[key] instanceof Array) {\n            if (!sent.data[key].includes(filterData[key])) {\n              return false;\n            }\n          } else {\n            if (sent.data[key] != filterData[key]) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n\n      this.view.updateDisplay(tmp, this.sentencesToSave);\n    });\n\n    this.sentencesToSave = [];\n    this.view.on('add_sentence', ({ sentenceId }) => {\n      this.sentencesToSave.push(\n        this.sentences.find((sent) => sent.data._id == sentenceId)\n      );\n    });\n    this.view.on('remove_sentence', ({ sentenceId }) => {\n      this.sentencesToSave = this.sentencesToSave.filter(\n        (sent) => sent.data._id != sentenceId\n      );\n    });\n\n    this.view.on('save', this.save.bind(this));\n\n    this.sentences = [];\n    SentenceModel.fetchAll()\n      .then((sent) => this.updateSentences(sent))\n      .catch((err) => AlertView.show('error', err));\n  }\n\n  updateSentences(sentences) {\n    this.sentences = sentences;\n\n    this.view.updateDisplay(sentences, this.sentencesToSave);\n  }\n\n  async save() {\n    try {\n      const sentences = this.sentencesToSave.map((e) => e.data._id);\n\n      const taskDetails = this.view.getValues('.task-details');\n      taskDetails.sentences = sentences;\n\n      const createTask = await CreateTaskModel.sendApiRequest(\n        '/api/v1/tasks',\n        'POST',\n        taskDetails\n      );\n\n      if (createTask) {\n        AlertView.show('success', 'Task created!');\n      }\n    } catch (err) {\n      AlertView.show('error', err.message);\n    }\n  }\n}\n","import * as controllers from './controllers.js';\n\n(function() {\n\t// load controllers dynamically based on what the server-generated HTML requests\n\tArray.from(document.querySelectorAll('[data-controller]')).forEach(domElement => {\n\t\tconst controllerClass = controllers[domElement.dataset['controller']];\n\n\t\tnew controllerClass(domElement);\n\t})\n})()\n"]}